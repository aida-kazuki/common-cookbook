#
# Generated by Chef for <%= node['hostname'] %>.
# Local modifications will be overwritten.
#
<% unless @params.key? :server_name -%>
<% @params[:server_name] = 'localhost' -%>
<% end -%>
<% unless @params.key? :location -%>
<% @params[:location] = 'nginx_status' -%>
<% end -%>
<% unless @params.key? :allow -%>
<% @params[:allow] = '127.0.0.1' -%>
<% end -%>

server {
  listen 127.0.0.1;
  server_name <%= @params[:server_name] %>;
  location /<%= @params[:location] %> {
    stub_status on;
    access_log off;
    allow <%= @params[:allow] %>;
    deny all;
  }
}
